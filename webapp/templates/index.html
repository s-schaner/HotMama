{% extends "base.html" %}
{% block content %}

<h2>Analyze Clip</h2>
<form action="/analyze" method="post" enctype="multipart/form-data">
  <div>
    <label>Video:</label>
    <input type="file" name="video" required>
  </div>
  <div>
    <label>Prompt:</label><br>
    <textarea name="prompt" rows="3">Describe rally; output JSON with rally_state, who_won, reason, timeline[{t,event,actor}]</textarea>
  </div>
  <div class="grid">
    <label>HF Endpoint:</label><input type="text" name="endpoint" value="https://xw3xbts6l8qsa6x9.us-east-2.aws.endpoints.huggingface.cloud" required>
    <label>Token:</label><input type="password" name="token" value="">
    <label>Model:</label><input type="text" name="model" value="Qwen/Qwen2.5-VL-32B-Instruct">
  </div>
  <div class="grid">
    <label>fps:</label><input type="number" name="fps" value="3">
    <label>max_frames:</label><input type="number" name="max_frames" value="48">
    <label>max_pixels:</label><input type="number" name="max_pixels" value="1048576">
  </div>
  <div class="grid">
    <label>max_tokens:</label><input type="number" name="max_tokens" value="256">
    <label>temperature:</label><input type="number" step="0.1" name="temperature" value="0.2">
  </div>
  <button type="submit">Analyze</button>
</form>

<h2>Heatmap (CSV x,y,h)</h2>
<form action="/heatmap" method="post" enctype="multipart/form-data" target="_blank">
  <input type="file" name="csvfile" required>
  <button type="submit">Generate Heatmap</button>
</form>

{% endblock %}
